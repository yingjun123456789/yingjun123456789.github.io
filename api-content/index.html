{"posts":[{"title":"å®‰è£…Docker","content":"1ã€yum åŒ…æ›´æ–°åˆ°æœ€æ–° yum update 2ã€å®‰è£…éœ€è¦çš„è½¯ä»¶åŒ…ï¼Œ yum-util æä¾›yum-config-manageråŠŸèƒ½ï¼Œå¦å¤–ä¸¤ä¸ªæ˜¯devicemapperé©±åŠ¨ä¾èµ–çš„ yum install -y yum-utils device-mapper-persistent-data lvm2 3ã€ è®¾ç½®yumæº yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo 4ã€ å®‰è£…dockerï¼Œå‡ºç°è¾“å…¥çš„ç•Œé¢éƒ½æŒ‰ y yum install -y docker-ce 5ã€ æŸ¥çœ‹dockerç‰ˆæœ¬ï¼ŒéªŒè¯æ˜¯å¦éªŒè¯æˆåŠŸ docker -v ","link":"https://yingjun123456789.github.io/post/an-zhuang-docker/"},{"title":"Mybatis","content":"Mybatis-9.28 ç¯å¢ƒï¼š JDK1.8 Mysql 5.7 maven 3.6.1 IDEA å›é¡¾ï¼š JDBC Mysql JavaåŸºç¡€ Maven Junit SSMæ¡†æ¶ï¼šé…ç½®æ–‡ä»¶çš„ã€‚ æœ€å¥½çš„æ–¹å¼ï¼šçœ‹å®˜ç½‘æ–‡æ¡£ï¼› 1ã€ç®€ä»‹ 1.1ã€ä»€ä¹ˆæ˜¯Mybatis MyBatis æ˜¯ä¸€æ¬¾ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶ å®ƒæ”¯æŒå®šåˆ¶åŒ– SQLã€å­˜å‚¨è¿‡ç¨‹ä»¥åŠé«˜çº§æ˜ å°„ã€‚ MyBatis é¿å…äº†å‡ ä¹æ‰€æœ‰çš„ JDBC ä»£ç å’Œæ‰‹åŠ¨è®¾ç½®å‚æ•°ä»¥åŠè·å–ç»“æœé›†ã€‚ MyBatis å¯ä»¥ä½¿ç”¨ç®€å•çš„ XML æˆ–æ³¨è§£æ¥é…ç½®å’Œæ˜ å°„åŸç”Ÿç±»å‹ã€æ¥å£å’Œ Java çš„ POJOï¼ˆPlain Old Java Objectsï¼Œæ™®é€šè€å¼ Java å¯¹è±¡ï¼‰ä¸ºæ•°æ®åº“ä¸­çš„è®°å½•ã€‚ MyBatis æœ¬æ˜¯apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®iBatis, 2010å¹´è¿™ä¸ªé¡¹ç›®ç”±apache software foundation è¿ç§»åˆ°äº†google codeï¼Œå¹¶ä¸”æ”¹åä¸ºMyBatis ã€‚ 2013å¹´11æœˆè¿ç§»åˆ°Githubã€‚ å¦‚ä½•è·å¾—Mybatisï¼Ÿ mavenä»“åº“ï¼š &lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.5.2&lt;/version&gt; &lt;/dependency&gt; Github ï¼š https://github.com/mybatis/mybatis-3/releases ä¸­æ–‡æ–‡æ¡£ï¼šhttps://mybatis.org/mybatis-3/zh/index.html 1.2ã€æŒä¹…åŒ– æ•°æ®æŒä¹…åŒ– æŒä¹…åŒ–å°±æ˜¯å°†ç¨‹åºçš„æ•°æ®åœ¨æŒä¹…çŠ¶æ€å’Œç¬æ—¶çŠ¶æ€è½¬åŒ–çš„è¿‡ç¨‹ å†…å­˜ï¼šæ–­ç”µå³å¤± æ•°æ®åº“(Jdbc)ï¼Œioæ–‡ä»¶æŒä¹…åŒ–ã€‚ ç”Ÿæ´»ï¼šå†·è—. ç½å¤´ã€‚ ä¸ºä»€ä¹ˆéœ€è¦éœ€è¦æŒä¹…åŒ–ï¼Ÿ æœ‰ä¸€äº›å¯¹è±¡ï¼Œä¸èƒ½è®©ä»–ä¸¢æ‰ã€‚ å†…å­˜å¤ªè´µäº† 1.3ã€æŒä¹…å±‚ Daoå±‚ï¼ŒServiceå±‚ï¼ŒControllerå±‚â€¦. å®ŒæˆæŒä¹…åŒ–å·¥ä½œçš„ä»£ç å— å±‚ç•Œé™ååˆ†æ˜æ˜¾ã€‚ 1.4 ä¸ºä»€ä¹ˆéœ€è¦Mybatisï¼Ÿ å¸®åŠ©ç¨‹åºçŒ¿å°†æ•°æ®å­˜å…¥åˆ°æ•°æ®åº“ä¸­ã€‚ æ–¹ä¾¿ ä¼ ç»Ÿçš„JDBCä»£ç å¤ªå¤æ‚äº†ã€‚ç®€åŒ–ã€‚æ¡†æ¶ã€‚è‡ªåŠ¨åŒ–ã€‚ ä¸ç”¨Mybatisä¹Ÿå¯ä»¥ã€‚æ›´å®¹æ˜“ä¸Šæ‰‹ã€‚ æŠ€æœ¯æ²¡æœ‰é«˜ä½ä¹‹åˆ† ä¼˜ç‚¹ï¼š ç®€å•æ˜“å­¦ çµæ´» sqlå’Œä»£ç çš„åˆ†ç¦»ï¼Œæé«˜äº†å¯ç»´æŠ¤æ€§ã€‚ æä¾›æ˜ å°„æ ‡ç­¾ï¼Œæ”¯æŒå¯¹è±¡ä¸æ•°æ®åº“çš„ormå­—æ®µå…³ç³»æ˜ å°„ æä¾›å¯¹è±¡å…³ç³»æ˜ å°„æ ‡ç­¾ï¼Œæ”¯æŒå¯¹è±¡å…³ç³»ç»„å»ºç»´æŠ¤ æä¾›xmlæ ‡ç­¾ï¼Œæ”¯æŒç¼–å†™åŠ¨æ€sqlã€‚ æœ€é‡è¦çš„ä¸€ç‚¹ï¼šä½¿ç”¨çš„äººå¤šï¼ Spring SpringMVC SpringBoot 2ã€ç¬¬ä¸€ä¸ªMybatisç¨‹åº æ€è·¯ï¼šæ­å»ºç¯å¢ƒ--&gt;å¯¼å…¥Mybatis--&gt;ç¼–å†™ä»£ç --&gt;æµ‹è¯•ï¼ 2.1ã€æ­å»ºç¯å¢ƒ æ­å»ºæ•°æ®åº“ CREATE DATABASE `mybatis`; USE `mybatis`; CREATE TABLE `user`( `id` INT(20) NOT NULL PRIMARY KEY, `name` VARCHAR(30) DEFAULT NULL, `pwd` VARCHAR(30) DEFAULT NULL )ENGINE=INNODB DEFAULT CHARSET=utf8; INSERT INTO `user`(`id`,`name`,`pwd`) VALUES (1,'ç‹‚ç¥','123456'), (2,'å¼ ä¸‰','123456'), (3,'æå››','123890') æ–°å»ºé¡¹ç›® æ–°å»ºä¸€ä¸ªæ™®é€šçš„mavené¡¹ç›® åˆ é™¤srcç›®å½• å¯¼å…¥mavenä¾èµ– &lt;!--å¯¼å…¥ä¾èµ–--&gt; &lt;dependencies&gt; &lt;!--mysqlé©±åŠ¨--&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.47&lt;/version&gt; &lt;/dependency&gt; &lt;!--mybatis--&gt; &lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.5.2&lt;/version&gt; &lt;/dependency&gt; &lt;!--junit--&gt; &lt;dependency&gt; &lt;groupId&gt;junit&lt;/groupId&gt; &lt;artifactId&gt;junit&lt;/artifactId&gt; &lt;version&gt;4.12&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt; 2.2ã€åˆ›å»ºä¸€ä¸ªæ¨¡å— ç¼–å†™mybatisçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; &lt;!DOCTYPE configuration PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt; &lt;!--configurationæ ¸å¿ƒé…ç½®æ–‡ä»¶--&gt; &lt;configuration&gt; &lt;environments default=&quot;development&quot;&gt; &lt;environment id=&quot;development&quot;&gt; &lt;transactionManager type=&quot;JDBC&quot;/&gt; &lt;dataSource type=&quot;POOLED&quot;&gt; &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt; &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/mybatis?useSSL=true&amp;amp;useUnicode=true&amp;amp;characterEncoding=UTF-8&quot;/&gt; &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt; &lt;property name=&quot;password&quot; value=&quot;123456&quot;/&gt; &lt;/dataSource&gt; &lt;/environment&gt; &lt;/environments&gt; &lt;/configuration&gt; ç¼–å†™mybatiså·¥å…·ç±» //sqlSessionFactory --&gt; sqlSession public class MybatisUtils { private static SqlSessionFactory sqlSessionFactory; static{ try { //ä½¿ç”¨Mybatisç¬¬ä¸€æ­¥ï¼šè·å–sqlSessionFactoryå¯¹è±¡ String resource = &quot;mybatis-config.xml&quot;; InputStream inputStream = Resources.getResourceAsStream(resource); sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream); } catch (IOException e) { e.printStackTrace(); } } //æ—¢ç„¶æœ‰äº† SqlSessionFactoryï¼Œé¡¾åæ€ä¹‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä»ä¸­è·å¾— SqlSession çš„å®ä¾‹äº†ã€‚ // SqlSession å®Œå…¨åŒ…å«äº†é¢å‘æ•°æ®åº“æ‰§è¡Œ SQL å‘½ä»¤æ‰€éœ€çš„æ‰€æœ‰æ–¹æ³•ã€‚ public static SqlSession getSqlSession(){ return sqlSessionFactory.openSession(); } } 2.3ã€ç¼–å†™ä»£ç  å®ä½“ç±» package com.kuang.pojo; //å®ä½“ç±» public class User { private int id; private String name; private String pwd; public User() { } public User(int id, String name, String pwd) { this.id = id; this.name = name; this.pwd = pwd; } public int getId() { return id; } public void setId(int id) { this.id = id; } public String getName() { return name; } public void setName(String name) { this.name = name; } public String getPwd() { return pwd; } public void setPwd(String pwd) { this.pwd = pwd; } @Override public String toString() { return &quot;User{&quot; + &quot;id=&quot; + id + &quot;, name='&quot; + name + '\\'' + &quot;, pwd='&quot; + pwd + '\\'' + '}'; } } Daoæ¥å£ public interface UserDao { List&lt;User&gt; getUserList(); } æ¥å£å®ç°ç±»ç”±åŸæ¥çš„UserDaoImplè½¬å˜ä¸ºä¸€ä¸ª Mapperé…ç½®æ–‡ä»¶. &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt; &lt;!DOCTYPE mapper PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot; &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt; &lt;!--namespace=ç»‘å®šä¸€ä¸ªå¯¹åº”çš„Dao/Mapperæ¥å£--&gt; &lt;mapper namespace=&quot;com.kuang.dao.UserDao&quot;&gt; &lt;!--selectæŸ¥è¯¢è¯­å¥--&gt; &lt;select id=&quot;getUserList&quot; resultType=&quot;com.kuang.pojo.User&quot;&gt; select * from mybatis.user &lt;/select&gt; &lt;/mapper&gt; 2.4ã€æµ‹è¯• æ³¨æ„ç‚¹ï¼š org.apache.ibatis.binding.BindingException: Type interface com.kuang.dao.UserDao is not known to the MapperRegistry. MapperRegistryæ˜¯ä»€ä¹ˆï¼Ÿ æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œ mappers junitæµ‹è¯• @Test public void test(){ //ç¬¬ä¸€æ­¥ï¼šè·å¾—SqlSessionå¯¹è±¡ SqlSession sqlSession = MybatisUtils.getSqlSession(); //æ–¹å¼ä¸€ï¼šgetMapper UserDao userDao = sqlSession.getMapper(UserDao.class); List&lt;User&gt; userList = userDao.getUserList(); for (User user : userList) { System.out.println(user); } //å…³é—­SqlSession sqlSession.close(); } ä½ ä»¬å¯ä»¥èƒ½ä¼šé‡åˆ°çš„é—®é¢˜ï¼š é…ç½®æ–‡ä»¶æ²¡æœ‰æ³¨å†Œ ç»‘å®šæ¥å£é”™è¯¯ã€‚ æ–¹æ³•åä¸å¯¹ è¿”å›ç±»å‹ä¸å¯¹ Mavenå¯¼å‡ºèµ„æºé—®é¢˜ 3ã€CRUD 1ã€namespace namespaceä¸­çš„åŒ…åè¦å’Œ Dao/mapper æ¥å£çš„åŒ…åä¸€è‡´ï¼ 2ã€select é€‰æ‹©ï¼ŒæŸ¥è¯¢è¯­å¥; id : å°±æ˜¯å¯¹åº”çš„namespaceä¸­çš„æ–¹æ³•åï¼› resultTypeï¼šSqlè¯­å¥æ‰§è¡Œçš„è¿”å›å€¼ï¼ parameterType ï¼š å‚æ•°ç±»å‹ï¼ ç¼–å†™æ¥å£ //æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ· User getUserById(int id); ç¼–å†™å¯¹åº”çš„mapperä¸­çš„sqlè¯­å¥ &lt;select id=&quot;getUserById&quot; parameterType=&quot;int&quot; resultType=&quot;com.kuang.pojo.User&quot;&gt; select * from mybatis.user where id = #{id} &lt;/select&gt; æµ‹è¯• @Test public void getUserById() { SqlSession sqlSession = MybatisUtils.getSqlSession(); UserMapper mapper = sqlSession.getMapper(UserMapper.class); User user = mapper.getUserById(1); System.out.println(user); sqlSession.close(); } 3ã€Insert &lt;!--å¯¹è±¡ä¸­çš„å±æ€§ï¼Œå¯ä»¥ç›´æ¥å–å‡ºæ¥--&gt; &lt;insert id=&quot;addUser&quot; parameterType=&quot;com.kuang.pojo.User&quot;&gt; insert into mybatis.user (id, name, pwd) values (#{id},#{name},#{pwd}); &lt;/insert&gt; 4ã€update &lt;update id=&quot;updateUser&quot; parameterType=&quot;com.kuang.pojo.User&quot;&gt; update mybatis.user set name=#{name},pwd=#{pwd} where id = #{id} ; &lt;/update&gt; 5ã€Delete &lt;delete id=&quot;deleteUser&quot; parameterType=&quot;int&quot;&gt; delete from mybatis.user where id = #{id}; &lt;/delete&gt; æ³¨æ„ç‚¹ï¼š å¢åˆ æ”¹éœ€è¦æäº¤äº‹åŠ¡ï¼ 6ã€åˆ†æé”™è¯¯ æ ‡ç­¾ä¸è¦åŒ¹é…é”™ resource ç»‘å®šmapperï¼Œéœ€è¦ä½¿ç”¨è·¯å¾„ï¼ ç¨‹åºé…ç½®æ–‡ä»¶å¿…é¡»ç¬¦åˆè§„èŒƒï¼ NullPointerExceptionï¼Œæ²¡æœ‰æ³¨å†Œåˆ°èµ„æº! è¾“å‡ºçš„xmlæ–‡ä»¶ä¸­å­˜åœ¨ä¸­æ–‡ä¹±ç é—®é¢˜ï¼ mavenèµ„æºæ²¡æœ‰å¯¼å‡ºé—®é¢˜ï¼ 7ã€ä¸‡èƒ½Map å‡è®¾ï¼Œæˆ‘ä»¬çš„å®ä½“ç±»ï¼Œæˆ–è€…æ•°æ®åº“ä¸­çš„è¡¨ï¼Œå­—æ®µæˆ–è€…å‚æ•°è¿‡å¤šï¼Œæˆ‘ä»¬åº”å½“è€ƒè™‘ä½¿ç”¨Mapï¼ //ä¸‡èƒ½çš„Map int addUser2(Map&lt;String,Object&gt; map); &lt;!--å¯¹è±¡ä¸­çš„å±æ€§ï¼Œå¯ä»¥ç›´æ¥å–å‡ºæ¥ ä¼ é€’mapçš„key--&gt; &lt;insert id=&quot;addUser&quot; parameterType=&quot;map&quot;&gt; insert into mybatis.user (id, pwd) values (#{userid},#{passWord}); &lt;/insert&gt; @Test public void addUser2(){ SqlSession sqlSession = MybatisUtils.getSqlSession(); UserMapper mapper = sqlSession.getMapper(UserMapper.class); Map&lt;String, Object&gt; map = new HashMap&lt;String, Object&gt;(); map.put(&quot;userid&quot;,5); map.put(&quot;passWord&quot;,&quot;2222333&quot;); mapper.addUser2(map); sqlSession.close(); } Mapä¼ é€’å‚æ•°ï¼Œç›´æ¥åœ¨sqlä¸­å–å‡ºkeyå³å¯ï¼ ã€parameterType=&quot;map&quot;ã€‘ å¯¹è±¡ä¼ é€’å‚æ•°ï¼Œç›´æ¥åœ¨sqlä¸­å–å¯¹è±¡çš„å±æ€§å³å¯ï¼ã€parameterType=&quot;Object&quot;ã€‘ åªæœ‰ä¸€ä¸ªåŸºæœ¬ç±»å‹å‚æ•°çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç›´æ¥åœ¨sqlä¸­å–åˆ°ï¼ å¤šä¸ªå‚æ•°ç”¨Mapï¼Œæˆ–è€…æ³¨è§£ï¼ 8ã€æ€è€ƒé¢˜ æ¨¡ç³ŠæŸ¥è¯¢æ€ä¹ˆå†™ï¼Ÿ Javaä»£ç æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼ é€’é€šé…ç¬¦ % % List&lt;User&gt; userList = mapper.getUserLike(&quot;%æ%&quot;); åœ¨sqlæ‹¼æ¥ä¸­ä½¿ç”¨é€šé…ç¬¦ï¼ select * from mybatis.user where name like &quot;%&quot;#{value}&quot;%&quot; 4ã€é…ç½®è§£æ 1ã€æ ¸å¿ƒé…ç½®æ–‡ä»¶ mybatis-config.xml MyBatis çš„é…ç½®æ–‡ä»¶åŒ…å«äº†ä¼šæ·±æ·±å½±å“ MyBatis è¡Œä¸ºçš„è®¾ç½®å’Œå±æ€§ä¿¡æ¯ã€‚ configurationï¼ˆé…ç½®ï¼‰ propertiesï¼ˆå±æ€§ï¼‰ settingsï¼ˆè®¾ç½®ï¼‰ typeAliasesï¼ˆç±»å‹åˆ«åï¼‰ typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰ objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰ pluginsï¼ˆæ’ä»¶ï¼‰ environmentsï¼ˆç¯å¢ƒé…ç½®ï¼‰ environmentï¼ˆç¯å¢ƒå˜é‡ï¼‰ transactionManagerï¼ˆäº‹åŠ¡ç®¡ç†å™¨ï¼‰ dataSourceï¼ˆæ•°æ®æºï¼‰ databaseIdProviderï¼ˆæ•°æ®åº“å‚å•†æ ‡è¯†ï¼‰ mappersï¼ˆæ˜ å°„å™¨ï¼‰ 2ã€ç¯å¢ƒé…ç½®ï¼ˆenvironmentsï¼‰ MyBatis å¯ä»¥é…ç½®æˆé€‚åº”å¤šç§ç¯å¢ƒ ä¸è¿‡è¦è®°ä½ï¼šå°½ç®¡å¯ä»¥é…ç½®å¤šä¸ªç¯å¢ƒï¼Œä½†æ¯ä¸ª SqlSessionFactory å®ä¾‹åªèƒ½é€‰æ‹©ä¸€ç§ç¯å¢ƒã€‚ å­¦ä¼šä½¿ç”¨é…ç½®å¤šå¥—è¿è¡Œç¯å¢ƒï¼ Mybatisé»˜è®¤çš„äº‹åŠ¡ç®¡ç†å™¨å°±æ˜¯ JDBC ï¼Œ è¿æ¥æ±  ï¼š POOLED 3ã€å±æ€§ï¼ˆpropertiesï¼‰ æˆ‘ä»¬å¯ä»¥é€šè¿‡propertieså±æ€§æ¥å®ç°å¼•ç”¨é…ç½®æ–‡ä»¶ è¿™äº›å±æ€§éƒ½æ˜¯å¯å¤–éƒ¨é…ç½®ä¸”å¯åŠ¨æ€æ›¿æ¢çš„ï¼Œæ—¢å¯ä»¥åœ¨å…¸å‹çš„ Java å±æ€§æ–‡ä»¶ä¸­é…ç½®ï¼Œäº¦å¯é€šè¿‡ properties å…ƒç´ çš„å­å…ƒç´ æ¥ä¼ é€’ã€‚ã€db.propertiesã€‘ ç¼–å†™ä¸€ä¸ªé…ç½®æ–‡ä»¶ db.properties driver=com.mysql.jdbc.Driver url=jdbc:mysql://localhost:3306/mybatis?useSSL=true&amp;useUnicode=true&amp;characterEncoding=UTF-8 username=root password=123456 åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ˜ å…¥ &lt;!--å¼•å…¥å¤–éƒ¨é…ç½®æ–‡ä»¶--&gt; &lt;properties resource=&quot;db.properties&quot;&gt; &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt; &lt;property name=&quot;pwd&quot; value=&quot;11111&quot;/&gt; &lt;/properties&gt; å¯ä»¥ç›´æ¥å¼•å…¥å¤–éƒ¨æ–‡ä»¶ å¯ä»¥åœ¨å…¶ä¸­å¢åŠ ä¸€äº›å±æ€§é…ç½® å¦‚æœä¸¤ä¸ªæ–‡ä»¶æœ‰åŒä¸€ä¸ªå­—æ®µï¼Œä¼˜å…ˆä½¿ç”¨å¤–éƒ¨é…ç½®æ–‡ä»¶çš„ï¼ 4ã€ç±»å‹åˆ«åï¼ˆtypeAliasesï¼‰ ç±»å‹åˆ«åæ˜¯ä¸º Java ç±»å‹è®¾ç½®ä¸€ä¸ªçŸ­çš„åå­—ã€‚â€˜ å­˜åœ¨çš„æ„ä¹‰ä»…åœ¨äºç”¨æ¥å‡å°‘ç±»å®Œå…¨é™å®šåçš„å†—ä½™ã€‚ &lt;!--å¯ä»¥ç»™å®ä½“ç±»èµ·åˆ«å--&gt; &lt;typeAliases&gt; &lt;typeAlias type=&quot;com.kuang.pojo.User&quot; alias=&quot;User&quot;/&gt; &lt;/typeAliases&gt; ä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªåŒ…åï¼ŒMyBatis ä¼šåœ¨åŒ…åä¸‹é¢æœç´¢éœ€è¦çš„ Java Beanï¼Œæ¯”å¦‚ï¼š æ‰«æå®ä½“ç±»çš„åŒ…ï¼Œå®ƒçš„é»˜è®¤åˆ«åå°±ä¸ºè¿™ä¸ªç±»çš„ ç±»åï¼Œé¦–å­—æ¯å°å†™ï¼ &lt;!--å¯ä»¥ç»™å®ä½“ç±»èµ·åˆ«å--&gt; &lt;typeAliases&gt; &lt;package name=&quot;com.kuang.pojo&quot;/&gt; &lt;/typeAliases&gt; åœ¨å®ä½“ç±»æ¯”è¾ƒå°‘çš„æ—¶å€™ï¼Œä½¿ç”¨ç¬¬ä¸€ç§æ–¹å¼ã€‚ å¦‚æœå®ä½“ç±»ååˆ†å¤šï¼Œå»ºè®®ä½¿ç”¨ç¬¬äºŒç§ã€‚ ç¬¬ä¸€ç§å¯ä»¥DIYåˆ«åï¼Œç¬¬äºŒç§åˆ™Â·ä¸è¡ŒÂ·ï¼Œå¦‚æœéè¦æ”¹ï¼Œéœ€è¦åœ¨å®ä½“ä¸Šå¢åŠ æ³¨è§£ @Alias(&quot;user&quot;) public class User {} 5ã€è®¾ç½® è¿™æ˜¯ MyBatis ä¸­æä¸ºé‡è¦çš„è°ƒæ•´è®¾ç½®ï¼Œå®ƒä»¬ä¼šæ”¹å˜ MyBatis çš„è¿è¡Œæ—¶è¡Œä¸ºã€‚ 6ã€å…¶ä»–é…ç½® typeHandlersï¼ˆç±»å‹å¤„ç†å™¨ï¼‰ objectFactoryï¼ˆå¯¹è±¡å·¥å‚ï¼‰ pluginsæ’ä»¶ mybatis-generator-core mybatis-plus é€šç”¨mapper 7ã€æ˜ å°„å™¨ï¼ˆmappersï¼‰ MapperRegistryï¼šæ³¨å†Œç»‘å®šæˆ‘ä»¬çš„Mapperæ–‡ä»¶ï¼› æ–¹å¼ä¸€ï¼š ã€æ¨èä½¿ç”¨ã€‘ &lt;!--æ¯ä¸€ä¸ªMapper.XMLéƒ½éœ€è¦åœ¨Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œï¼--&gt; &lt;mappers&gt; &lt;mapper resource=&quot;com/kuang/dao/UserMapper.xml&quot;/&gt; &lt;/mappers&gt; æ–¹å¼äºŒï¼šä½¿ç”¨classæ–‡ä»¶ç»‘å®šæ³¨å†Œ &lt;!--æ¯ä¸€ä¸ªMapper.XMLéƒ½éœ€è¦åœ¨Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œï¼--&gt; &lt;mappers&gt; &lt;mapper class=&quot;com.kuang.dao.UserMapper&quot;/&gt; &lt;/mappers&gt; æ³¨æ„ç‚¹ï¼š æ¥å£å’Œä»–çš„Mapperé…ç½®æ–‡ä»¶å¿…é¡»åŒåï¼ æ¥å£å’Œä»–çš„Mapperé…ç½®æ–‡ä»¶å¿…é¡»åœ¨åŒä¸€ä¸ªåŒ…ä¸‹ï¼ æ–¹å¼ä¸‰ï¼šä½¿ç”¨æ‰«æåŒ…è¿›è¡Œæ³¨å…¥ç»‘å®š &lt;!--æ¯ä¸€ä¸ªMapper.XMLéƒ½éœ€è¦åœ¨Mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­æ³¨å†Œï¼--&gt; &lt;mappers&gt; &lt;package name=&quot;com.kuang.dao&quot;/&gt; &lt;/mappers&gt; æ³¨æ„ç‚¹ï¼š æ¥å£å’Œä»–çš„Mapperé…ç½®æ–‡ä»¶å¿…é¡»åŒåï¼ æ¥å£å’Œä»–çš„Mapperé…ç½®æ–‡ä»¶å¿…é¡»åœ¨åŒä¸€ä¸ªåŒ…ä¸‹ï¼ ç»ƒä¹ æ—¶é—´ï¼š å°†æ•°æ®åº“é…ç½®æ–‡ä»¶å¤–éƒ¨å¼•å…¥ å®ä½“ç±»åˆ«å ä¿è¯UserMapper æ¥å£ å’Œ UserMapper .xml æ”¹ä¸ºä¸€è‡´ï¼å¹¶ä¸”æ”¾åœ¨åŒä¸€ä¸ªåŒ…ä¸‹ï¼ 8ã€ç”Ÿå‘½å‘¨æœŸå’Œä½œç”¨åŸŸ ç”Ÿå‘½å‘¨æœŸï¼Œå’Œä½œç”¨åŸŸï¼Œæ˜¯è‡³å…³é‡è¦çš„ï¼Œå› ä¸ºé”™è¯¯çš„ä½¿ç”¨ä¼šå¯¼è‡´éå¸¸ä¸¥é‡çš„å¹¶å‘é—®é¢˜ã€‚ SqlSessionFactoryBuilderï¼š ä¸€æ—¦åˆ›å»ºäº† SqlSessionFactoryï¼Œå°±ä¸å†éœ€è¦å®ƒäº† å±€éƒ¨å˜é‡ SqlSessionFactoryï¼š è¯´ç™½äº†å°±æ˜¯å¯ä»¥æƒ³è±¡ä¸º ï¼šæ•°æ®åº“è¿æ¥æ±  SqlSessionFactory ä¸€æ—¦è¢«åˆ›å»ºå°±åº”è¯¥åœ¨åº”ç”¨çš„è¿è¡ŒæœŸé—´ä¸€ç›´å­˜åœ¨ï¼Œæ²¡æœ‰ä»»ä½•ç†ç”±ä¸¢å¼ƒå®ƒæˆ–é‡æ–°åˆ›å»ºå¦ä¸€ä¸ªå®ä¾‹ã€‚ å› æ­¤ SqlSessionFactory çš„æœ€ä½³ä½œç”¨åŸŸæ˜¯åº”ç”¨ä½œç”¨åŸŸã€‚ æœ€ç®€å•çš„å°±æ˜¯ä½¿ç”¨å•ä¾‹æ¨¡å¼æˆ–è€…é™æ€å•ä¾‹æ¨¡å¼ã€‚ SqlSession è¿æ¥åˆ°è¿æ¥æ± çš„ä¸€ä¸ªè¯·æ±‚ï¼ SqlSession çš„å®ä¾‹ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå› æ­¤æ˜¯ä¸èƒ½è¢«å…±äº«çš„ï¼Œæ‰€ä»¥å®ƒçš„æœ€ä½³çš„ä½œç”¨åŸŸæ˜¯è¯·æ±‚æˆ–æ–¹æ³•ä½œç”¨åŸŸã€‚ ç”¨å®Œä¹‹åéœ€è¦èµ¶ç´§å…³é—­ï¼Œå¦åˆ™èµ„æºè¢«å ç”¨ï¼ è¿™é‡Œé¢çš„æ¯ä¸€ä¸ªMapperï¼Œå°±ä»£è¡¨ä¸€ä¸ªå…·ä½“çš„ä¸šåŠ¡ï¼ 5ã€è§£å†³å±æ€§åå’Œå­—æ®µåä¸ä¸€è‡´çš„é—®é¢˜ 1ã€ é—®é¢˜ æ•°æ®åº“ä¸­çš„å­—æ®µ æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œæ‹·è´ä¹‹å‰çš„ï¼Œæµ‹è¯•å®ä½“ç±»å­—æ®µä¸ä¸€è‡´çš„æƒ…å†µ public class User { private int id; private String name; private String password; } æµ‹è¯•å‡ºç°é—®é¢˜ // select * from mybatis.user where id = #{id} //ç±»å‹å¤„ç†å™¨ // select id,name,pwd from mybatis.user where id = #{id} è§£å†³æ–¹æ³•ï¼š èµ·åˆ«å &lt;select id=&quot;getUserById&quot; resultType=&quot;com.kuang.pojo.User&quot;&gt; select id,name,pwd as password from mybatis.user where id = #{id} &lt;/select&gt; 2ã€resultMap ç»“æœé›†æ˜ å°„ id name pwd id name password &lt;!--ç»“æœé›†æ˜ å°„--&gt; &lt;resultMap id=&quot;UserMap&quot; type=&quot;User&quot;&gt; &lt;!--columnæ•°æ®åº“ä¸­çš„å­—æ®µï¼Œpropertyå®ä½“ç±»ä¸­çš„å±æ€§--&gt; &lt;result column=&quot;id&quot; property=&quot;id&quot;/&gt; &lt;result column=&quot;name&quot; property=&quot;name&quot;/&gt; &lt;result column=&quot;pwd&quot; property=&quot;password&quot;/&gt; &lt;/resultMap&gt; &lt;select id=&quot;getUserById&quot; resultMap=&quot;UserMap&quot;&gt; select * from mybatis.user where id = #{id} &lt;/select&gt; resultMap å…ƒç´ æ˜¯ MyBatis ä¸­æœ€é‡è¦æœ€å¼ºå¤§çš„å…ƒç´  ResultMap çš„è®¾è®¡æ€æƒ³æ˜¯ï¼Œå¯¹äºç®€å•çš„è¯­å¥æ ¹æœ¬ä¸éœ€è¦é…ç½®æ˜¾å¼çš„ç»“æœæ˜ å°„ï¼Œè€Œå¯¹äºå¤æ‚ä¸€ç‚¹çš„è¯­å¥åªéœ€è¦æè¿°å®ƒä»¬çš„å…³ç³»å°±è¡Œäº†ã€‚ ResultMap æœ€ä¼˜ç§€çš„åœ°æ–¹åœ¨äºï¼Œè™½ç„¶ä½ å·²ç»å¯¹å®ƒç›¸å½“äº†è§£äº†ï¼Œä½†æ˜¯æ ¹æœ¬å°±ä¸éœ€è¦æ˜¾å¼åœ°ç”¨åˆ°ä»–ä»¬ã€‚ å¦‚æœä¸–ç•Œæ€»æ˜¯è¿™ä¹ˆç®€å•å°±å¥½äº†ã€‚ 6ã€æ—¥å¿— 6.1ã€æ—¥å¿—å·¥å‚ å¦‚æœä¸€ä¸ªæ•°æ®åº“æ“ä½œï¼Œå‡ºç°äº†å¼‚å¸¸ï¼Œæˆ‘ä»¬éœ€è¦æ’é”™ã€‚æ—¥å¿—å°±æ˜¯æœ€å¥½çš„åŠ©æ‰‹ï¼ æ›¾ç»ï¼šsout ã€debug ç°åœ¨ï¼šæ—¥å¿—å·¥å‚ï¼ SLF4J LOG4J ã€æŒæ¡ã€‘ LOG4J2 JDK_LOGGING COMMONS_LOGGING STDOUT_LOGGING ã€æŒæ¡ã€‘ NO_LOGGING åœ¨Mybatisä¸­å…·ä½“ä½¿ç”¨é‚£ä¸ªä¸€æ—¥å¿—å®ç°ï¼Œåœ¨è®¾ç½®ä¸­è®¾å®šï¼ STDOUT_LOGGINGæ ‡å‡†æ—¥å¿—è¾“å‡º åœ¨mybatisæ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®æˆ‘ä»¬çš„æ—¥å¿—ï¼ &lt;settings&gt; &lt;setting name=&quot;logImpl&quot; value=&quot;STDOUT_LOGGING&quot;/&gt; &lt;/settings&gt; 6.2ã€Log4j ä»€ä¹ˆæ˜¯Log4jï¼Ÿ Log4jæ˜¯Apacheçš„ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œé€šè¿‡ä½¿ç”¨Log4jï¼Œæˆ‘ä»¬å¯ä»¥æ§åˆ¶æ—¥å¿—ä¿¡æ¯è¾“é€çš„ç›®çš„åœ°æ˜¯æ§åˆ¶å°ã€æ–‡ä»¶ã€GUIç»„ä»¶ æˆ‘ä»¬ä¹Ÿå¯ä»¥æ§åˆ¶æ¯ä¸€æ¡æ—¥å¿—çš„è¾“å‡ºæ ¼å¼ï¼› é€šè¿‡å®šä¹‰æ¯ä¸€æ¡æ—¥å¿—ä¿¡æ¯çš„çº§åˆ«ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ ç»†è‡´åœ°æ§åˆ¶æ—¥å¿—çš„ç”Ÿæˆè¿‡ç¨‹ã€‚ é€šè¿‡ä¸€ä¸ªé…ç½®æ–‡ä»¶æ¥çµæ´»åœ°è¿›è¡Œé…ç½®ï¼Œè€Œä¸éœ€è¦ä¿®æ”¹åº”ç”¨çš„ä»£ç ã€‚ å…ˆå¯¼å…¥log4jçš„åŒ… &lt;!-- https://mvnrepository.com/artifact/log4j/log4j --&gt; &lt;dependency&gt; &lt;groupId&gt;log4j&lt;/groupId&gt; &lt;artifactId&gt;log4j&lt;/artifactId&gt; &lt;version&gt;1.2.17&lt;/version&gt; &lt;/dependency&gt; log4j.properties #å°†ç­‰çº§ä¸ºDEBUGçš„æ—¥å¿—ä¿¡æ¯è¾“å‡ºåˆ°consoleå’Œfileè¿™ä¸¤ä¸ªç›®çš„åœ°ï¼Œconsoleå’Œfileçš„å®šä¹‰åœ¨ä¸‹é¢çš„ä»£ç  log4j.rootLogger=DEBUG,console,file #æ§åˆ¶å°è¾“å‡ºçš„ç›¸å…³è®¾ç½® log4j.appender.console = org.apache.log4j.ConsoleAppender log4j.appender.console.Target = System.out log4j.appender.console.Threshold=DEBUG log4j.appender.console.layout = org.apache.log4j.PatternLayout log4j.appender.console.layout.ConversionPattern=[%c]-%m%n #æ–‡ä»¶è¾“å‡ºçš„ç›¸å…³è®¾ç½® log4j.appender.file = org.apache.log4j.RollingFileAppender log4j.appender.file.File=./log/kuang.log log4j.appender.file.MaxFileSize=10mb log4j.appender.file.Threshold=DEBUG log4j.appender.file.layout=org.apache.log4j.PatternLayout log4j.appender.file.layout.ConversionPattern=[%p][%d{yy-MM-dd}][%c]%m%n #æ—¥å¿—è¾“å‡ºçº§åˆ« log4j.logger.org.mybatis=DEBUG log4j.logger.java.sql=DEBUG log4j.logger.java.sql.Statement=DEBUG log4j.logger.java.sql.ResultSet=DEBUG log4j.logger.java.sql.PreparedStatement=DEBUG é…ç½®log4jä¸ºæ—¥å¿—çš„å®ç° &lt;settings&gt; &lt;setting name=&quot;logImpl&quot; value=&quot;&quot;/&gt; &lt;/settings&gt; Log4jçš„ä½¿ç”¨ï¼ï¼Œç›´æ¥æµ‹è¯•è¿è¡Œåˆšæ‰çš„æŸ¥è¯¢ ç®€å•ä½¿ç”¨ åœ¨è¦ä½¿ç”¨Log4j çš„ç±»ä¸­ï¼Œå¯¼å…¥åŒ… import org.apache.log4j.Logger; æ—¥å¿—å¯¹è±¡ï¼Œå‚æ•°ä¸ºå½“å‰ç±»çš„class static Logger logger = Logger.getLogger(UserDaoTest.class); æ—¥å¿—çº§åˆ« logger.info(&quot;info:è¿›å…¥äº†testLog4j&quot;); logger.debug(&quot;debug:è¿›å…¥äº†testLog4j&quot;); logger.error(&quot;error:è¿›å…¥äº†testLog4j&quot;); 7ã€åˆ†é¡µ æ€è€ƒï¼šä¸ºä»€ä¹ˆè¦åˆ†é¡µï¼Ÿ å‡å°‘æ•°æ®çš„å¤„ç†é‡ 7.1ã€ä½¿ç”¨Limitåˆ†é¡µ è¯­æ³•ï¼šSELECT * from user limit startIndex,pageSize; SELECT * from user limit 3; #[0,n] ä½¿ç”¨Mybatiså®ç°åˆ†é¡µï¼Œæ ¸å¿ƒSQL æ¥å£ //åˆ†é¡µ List&lt;User&gt; getUserByLimit(Map&lt;String,Integer&gt; map); Mapper.xml &lt;!--//åˆ†é¡µ--&gt; &lt;select id=&quot;getUserByLimit&quot; parameterType=&quot;map&quot; resultMap=&quot;UserMap&quot;&gt; select * from mybatis.user limit #{startIndex},#{pageSize} &lt;/select&gt; æµ‹è¯• @Test public void getUserByLimit(){ SqlSession sqlSession = MybatisUtils.getSqlSession(); UserMapper mapper = sqlSession.getMapper(UserMapper.class); HashMap&lt;String, Integer&gt; map = new HashMap&lt;String, Integer&gt;(); map.put(&quot;startIndex&quot;,1); map.put(&quot;pageSize&quot;,2); List&lt;User&gt; userList = mapper.getUserByLimit(map); for (User user : userList) { System.out.println(user); } sqlSession.close(); } 7.2ã€RowBoundsåˆ†é¡µ ä¸å†ä½¿ç”¨SQLå®ç°åˆ†é¡µ æ¥å£ //åˆ†é¡µ2 List&lt;User&gt; getUserByRowBounds(); mapper.xml &lt;!--åˆ†é¡µ2--&gt; &lt;select id=&quot;getUserByRowBounds&quot; resultMap=&quot;UserMap&quot;&gt; select * from mybatis.user &lt;/select&gt; æµ‹è¯• @Test public void getUserByRowBounds(){ SqlSession sqlSession = MybatisUtils.getSqlSession(); //RowBoundså®ç° RowBounds rowBounds = new RowBounds(1, 2); //é€šè¿‡Javaä»£ç å±‚é¢å®ç°åˆ†é¡µ List&lt;User&gt; userList = sqlSession.selectList(&quot;com.kuang.dao.UserMapper.getUserByRowBounds&quot;,null,rowBounds); for (User user : userList) { System.out.println(user); } sqlSession.close(); } 7.3ã€åˆ†é¡µæ’ä»¶ äº†è§£å³å¯ï¼Œä¸‡ä¸€ ä»¥åå…¬å¸çš„æ¶æ„å¸ˆï¼Œè¯´è¦ä½¿ç”¨ï¼Œä½ éœ€è¦çŸ¥é“å®ƒæ˜¯ä»€ä¹ˆä¸œè¥¿ï¼ 8ã€ä½¿ç”¨æ³¨è§£å¼€å‘ 8.1ã€é¢å‘æ¥å£ç¼–ç¨‹ - å¤§å®¶ä¹‹å‰éƒ½å­¦è¿‡é¢å‘å¯¹è±¡ç¼–ç¨‹ï¼Œä¹Ÿå­¦ä¹ è¿‡æ¥å£ï¼Œä½†åœ¨çœŸæ­£çš„å¼€å‘ä¸­ï¼Œå¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä¼šé€‰æ‹©é¢å‘æ¥å£ç¼–ç¨‹ - æ ¹æœ¬åŸå›  : è§£è€¦ , å¯æ‹“å±• , æé«˜å¤ç”¨ , åˆ†å±‚å¼€å‘ä¸­ , ä¸Šå±‚ä¸ç”¨ç®¡å…·ä½“çš„å®ç° , å¤§å®¶éƒ½éµå®ˆå…±åŒçš„æ ‡å‡† , ä½¿å¾—å¼€å‘å˜å¾—å®¹æ˜“ , è§„èŒƒæ€§æ›´å¥½ - åœ¨ä¸€ä¸ªé¢å‘å¯¹è±¡çš„ç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿçš„å„ç§åŠŸèƒ½æ˜¯ç”±è®¸è®¸å¤šå¤šçš„ä¸åŒå¯¹è±¡åä½œå®Œæˆçš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå„ä¸ªå¯¹è±¡å†…éƒ¨æ˜¯å¦‚ä½•å®ç°è‡ªå·±çš„,å¯¹ç³»ç»Ÿè®¾è®¡äººå‘˜æ¥è®²å°±ä¸é‚£ä¹ˆé‡è¦äº†ï¼› - è€Œå„ä¸ªå¯¹è±¡ä¹‹é—´çš„åä½œå…³ç³»åˆ™æˆä¸ºç³»ç»Ÿè®¾è®¡çš„å…³é”®ã€‚å°åˆ°ä¸åŒç±»ä¹‹é—´çš„é€šä¿¡ï¼Œå¤§åˆ°å„æ¨¡å—ä¹‹é—´çš„äº¤äº’ï¼Œåœ¨ç³»ç»Ÿè®¾è®¡ä¹‹åˆéƒ½æ˜¯è¦ç€é‡è€ƒè™‘çš„ï¼Œè¿™ä¹Ÿæ˜¯ç³»ç»Ÿè®¾è®¡çš„ä¸»è¦å·¥ä½œå†…å®¹ã€‚é¢å‘æ¥å£ç¼–ç¨‹å°±æ˜¯æŒ‡æŒ‰ç…§è¿™ç§æ€æƒ³æ¥ç¼–ç¨‹ã€‚ å…³äºæ¥å£çš„ç†è§£ - æ¥å£ä»æ›´æ·±å±‚æ¬¡çš„ç†è§£ï¼Œåº”æ˜¯å®šä¹‰ï¼ˆè§„èŒƒï¼Œçº¦æŸï¼‰ä¸å®ç°ï¼ˆåå®åˆ†ç¦»çš„åŸåˆ™ï¼‰çš„åˆ†ç¦»ã€‚ - æ¥å£çš„æœ¬èº«åæ˜ äº†ç³»ç»Ÿè®¾è®¡äººå‘˜å¯¹ç³»ç»Ÿçš„æŠ½è±¡ç†è§£ã€‚ - æ¥å£åº”æœ‰ä¸¤ç±»ï¼š - ç¬¬ä¸€ç±»æ˜¯å¯¹ä¸€ä¸ªä¸ªä½“çš„æŠ½è±¡ï¼Œå®ƒå¯å¯¹åº”ä¸ºä¸€ä¸ªæŠ½è±¡ä½“(abstract class)ï¼› - ç¬¬äºŒç±»æ˜¯å¯¹ä¸€ä¸ªä¸ªä½“æŸä¸€æ–¹é¢çš„æŠ½è±¡ï¼Œå³å½¢æˆä¸€ä¸ªæŠ½è±¡é¢ï¼ˆinterfaceï¼‰ï¼› - ä¸€ä¸ªä½“æœ‰å¯èƒ½æœ‰å¤šä¸ªæŠ½è±¡é¢ã€‚æŠ½è±¡ä½“ä¸æŠ½è±¡é¢æ˜¯æœ‰åŒºåˆ«çš„ã€‚ ä¸‰ä¸ªé¢å‘åŒºåˆ« - é¢å‘å¯¹è±¡æ˜¯æŒ‡ï¼Œæˆ‘ä»¬è€ƒè™‘é—®é¢˜æ—¶ï¼Œä»¥å¯¹è±¡ä¸ºå•ä½ï¼Œè€ƒè™‘å®ƒçš„å±æ€§åŠæ–¹æ³• . - é¢å‘è¿‡ç¨‹æ˜¯æŒ‡ï¼Œæˆ‘ä»¬è€ƒè™‘é—®é¢˜æ—¶ï¼Œä»¥ä¸€ä¸ªå…·ä½“çš„æµç¨‹ï¼ˆäº‹åŠ¡è¿‡ç¨‹ï¼‰ä¸ºå•ä½ï¼Œè€ƒè™‘å®ƒçš„å®ç° . - æ¥å£è®¾è®¡ä¸éæ¥å£è®¾è®¡æ˜¯é’ˆå¯¹å¤ç”¨æŠ€æœ¯è€Œè¨€çš„ï¼Œä¸é¢å‘å¯¹è±¡ï¼ˆè¿‡ç¨‹ï¼‰ä¸æ˜¯ä¸€ä¸ªé—®é¢˜.æ›´å¤šçš„ä½“ç°å°±æ˜¯å¯¹ç³»ç»Ÿæ•´ä½“çš„æ¶æ„ 8.2ã€ä½¿ç”¨æ³¨è§£å¼€å‘ æ³¨è§£åœ¨æ¥å£ä¸Šå®ç° @Select(&quot;select * from user&quot;) List&lt;User&gt; getUsers(); éœ€è¦å†æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ç»‘å®šæ¥å£ï¼ &lt;!--ç»‘å®šæ¥å£--&gt; &lt;mappers&gt; &lt;mapper class=&quot;com.kuang.dao.UserMapper&quot;/&gt; &lt;/mappers&gt; æµ‹è¯• æœ¬è´¨ï¼šåå°„æœºåˆ¶å®ç° åº•å±‚ï¼šåŠ¨æ€ä»£ç†ï¼ Mybatisè¯¦ç»†çš„æ‰§è¡Œæµç¨‹ï¼ 8.3ã€CRUD æˆ‘ä»¬å¯ä»¥åœ¨å·¥å…·ç±»åˆ›å»ºçš„æ—¶å€™å®ç°è‡ªåŠ¨æäº¤äº‹åŠ¡ï¼ public static SqlSession getSqlSession(){ return sqlSessionFactory.openSession(true); } ç¼–å†™æ¥å£ï¼Œå¢åŠ æ³¨è§£ public interface UserMapper { @Select(&quot;select * from user&quot;) List&lt;User&gt; getUsers(); // æ–¹æ³•å­˜åœ¨å¤šä¸ªå‚æ•°ï¼Œæ‰€æœ‰çš„å‚æ•°å‰é¢å¿…é¡»åŠ ä¸Š @Param(&quot;id&quot;)æ³¨è§£ @Select(&quot;select * from user where id = #{id}&quot;) User getUserByID(@Param(&quot;id&quot;) int id); @Insert(&quot;insert into user(id,name,pwd) values (#{id},#{name},#{password})&quot;) int addUser(User user); @Update(&quot;update user set name=#{name},pwd=#{password} where id = #{id}&quot;) int updateUser(User user); @Delete(&quot;delete from user where id = #{uid}&quot;) int deleteUser(@Param(&quot;uid&quot;) int id); } æµ‹è¯•ç±» ã€æ³¨æ„ï¼šæˆ‘ä»¬å¿…é¡»è¦è®²æ¥å£æ³¨å†Œç»‘å®šåˆ°æˆ‘ä»¬çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ï¼ã€‘ å…³äº@Param() æ³¨è§£ åŸºæœ¬ç±»å‹çš„å‚æ•°æˆ–è€…Stringç±»å‹ï¼Œéœ€è¦åŠ ä¸Š å¼•ç”¨ç±»å‹ä¸éœ€è¦åŠ  å¦‚æœåªæœ‰ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„è¯ï¼Œå¯ä»¥å¿½ç•¥ï¼Œä½†æ˜¯å»ºè®®å¤§å®¶éƒ½åŠ ä¸Šï¼ æˆ‘ä»¬åœ¨SQLä¸­å¼•ç”¨çš„å°±æ˜¯æˆ‘ä»¬è¿™é‡Œçš„ @Param() ä¸­è®¾å®šçš„å±æ€§åï¼ #{} ${} åŒºåˆ« 9ã€Lombok Project Lombok is a java library that automatically plugs into your editor and build tools, spicing up your java. Never write another getter or equals method again, with one annotation your class has a fully featured builder, Automate your logging variables, and much more. java library plugs build tools with one annotation your class ä½¿ç”¨æ­¥éª¤ï¼š åœ¨IDEAä¸­å®‰è£…Lombokæ’ä»¶ï¼ åœ¨é¡¹ç›®ä¸­å¯¼å…¥lombokçš„jaråŒ… &lt;dependency&gt; &lt;groupId&gt;org.projectlombok&lt;/groupId&gt; &lt;artifactId&gt;lombok&lt;/artifactId&gt; &lt;version&gt;1.18.10&lt;/version&gt; &lt;/dependency&gt; åœ¨å®ä½“ç±»ä¸ŠåŠ æ³¨è§£å³å¯ï¼ @Data @AllArgsConstructor @NoArgsConstructor @Getter and @Setter @FieldNameConstants @ToString @EqualsAndHashCode @AllArgsConstructor, @RequiredArgsConstructor and @NoArgsConstructor @Log, @Log4j, @Log4j2, @Slf4j, @XSlf4j, @CommonsLog, @JBossLog, @Flogger @Data @Builder @Singular @Delegate @Value @Accessors @Wither @SneakyThrows è¯´æ˜ï¼š @Dataï¼šæ— å‚æ„é€ ï¼Œgetã€setã€tostringã€hashcodeï¼Œequals @AllArgsConstructor @NoArgsConstructor @EqualsAndHashCode @ToString @Getter 10ã€å¤šå¯¹ä¸€å¤„ç† å¤šå¯¹ä¸€ï¼š å¤šä¸ªå­¦ç”Ÿï¼Œå¯¹åº”ä¸€ä¸ªè€å¸ˆ å¯¹äºå­¦ç”Ÿè¿™è¾¹è€Œè¨€ï¼Œ å…³è” .. å¤šä¸ªå­¦ç”Ÿï¼Œå…³è”ä¸€ä¸ªè€å¸ˆ ã€å¤šå¯¹ä¸€ã€‘ å¯¹äºè€å¸ˆè€Œè¨€ï¼Œ é›†åˆ ï¼Œ ä¸€ä¸ªè€å¸ˆï¼Œæœ‰å¾ˆå¤šå­¦ç”Ÿ ã€ä¸€å¯¹å¤šã€‘ SQLï¼š CREATE TABLE `teacher` ( `id` INT(10) NOT NULL, `name` VARCHAR(30) DEFAULT NULL, PRIMARY KEY (`id`) ) ENGINE=INNODB DEFAULT CHARSET=utf8 INSERT INTO teacher(`id`, `name`) VALUES (1, 'ç§¦è€å¸ˆ'); CREATE TABLE `student` ( `id` INT(10) NOT NULL, `name` VARCHAR(30) DEFAULT NULL, `tid` INT(10) DEFAULT NULL, PRIMARY KEY (`id`), KEY `fktid` (`tid`), CONSTRAINT `fktid` FOREIGN KEY (`tid`) REFERENCES `teacher` (`id`) ) ENGINE=INNODB DEFAULT CHARSET=utf8 INSERT INTO `student` (`id`, `name`, `tid`) VALUES ('1', 'å°æ˜', '1'); INSERT INTO `student` (`id`, `name`, `tid`) VALUES ('2', 'å°çº¢', '1'); INSERT INTO `student` (`id`, `name`, `tid`) VALUES ('3', 'å°å¼ ', '1'); INSERT INTO `student` (`id`, `name`, `tid`) VALUES ('4', 'å°æ', '1'); INSERT INTO `student` (`id`, `name`, `tid`) VALUES ('5', 'å°ç‹', '1'); æµ‹è¯•ç¯å¢ƒæ­å»º å¯¼å…¥lombok æ–°å»ºå®ä½“ç±» Teacherï¼ŒStudent å»ºç«‹Mapperæ¥å£ å»ºç«‹Mapper.XMLæ–‡ä»¶ åœ¨æ ¸å¿ƒé…ç½®æ–‡ä»¶ä¸­ç»‘å®šæ³¨å†Œæˆ‘ä»¬çš„Mapperæ¥å£æˆ–è€…æ–‡ä»¶ï¼ã€æ–¹å¼å¾ˆå¤šï¼Œéšå¿ƒé€‰ã€‘ æµ‹è¯•æŸ¥è¯¢æ˜¯å¦èƒ½å¤ŸæˆåŠŸï¼ æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç† &lt;!-- æ€è·¯: 1. æŸ¥è¯¢æ‰€æœ‰çš„å­¦ç”Ÿä¿¡æ¯ 2. æ ¹æ®æŸ¥è¯¢å‡ºæ¥çš„å­¦ç”Ÿçš„tidï¼Œå¯»æ‰¾å¯¹åº”çš„è€å¸ˆï¼ å­æŸ¥è¯¢ --&gt; &lt;select id=&quot;getStudent&quot; resultMap=&quot;StudentTeacher&quot;&gt; select * from student &lt;/select&gt; &lt;resultMap id=&quot;StudentTeacher&quot; type=&quot;Student&quot;&gt; &lt;result property=&quot;id&quot; column=&quot;id&quot;/&gt; &lt;result property=&quot;name&quot; column=&quot;name&quot;/&gt; &lt;!--å¤æ‚çš„å±æ€§ï¼Œæˆ‘ä»¬éœ€è¦å•ç‹¬å¤„ç† å¯¹è±¡ï¼š association é›†åˆï¼š collection --&gt; &lt;association property=&quot;teacher&quot; column=&quot;tid&quot; javaType=&quot;Teacher&quot; select=&quot;getTeacher&quot;/&gt; &lt;/resultMap&gt; &lt;select id=&quot;getTeacher&quot; resultType=&quot;Teacher&quot;&gt; select * from teacher where id = #{id} &lt;/select&gt; æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç† &lt;!--æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç†--&gt; &lt;select id=&quot;getStudent2&quot; resultMap=&quot;StudentTeacher2&quot;&gt; select s.id sid,s.name sname,t.name tname from student s,teacher t where s.tid = t.id; &lt;/select&gt; &lt;resultMap id=&quot;StudentTeacher2&quot; type=&quot;Student&quot;&gt; &lt;result property=&quot;id&quot; column=&quot;sid&quot;/&gt; &lt;result property=&quot;name&quot; column=&quot;sname&quot;/&gt; &lt;association property=&quot;teacher&quot; javaType=&quot;Teacher&quot;&gt; &lt;result property=&quot;name&quot; column=&quot;tname&quot;/&gt; &lt;/association&gt; &lt;/resultMap&gt; å›é¡¾Mysql å¤šå¯¹ä¸€æŸ¥è¯¢æ–¹å¼ï¼š å­æŸ¥è¯¢ è”è¡¨æŸ¥è¯¢ 11ã€ä¸€å¯¹å¤šå¤„ç† æ¯”å¦‚ï¼šä¸€ä¸ªè€å¸ˆæ‹¥æœ‰å¤šä¸ªå­¦ç”Ÿï¼ å¯¹äºè€å¸ˆè€Œè¨€ï¼Œå°±æ˜¯ä¸€å¯¹å¤šçš„å…³ç³»! ç¯å¢ƒæ­å»º ç¯å¢ƒæ­å»ºï¼Œå’Œåˆšæ‰ä¸€æ · å®ä½“ç±» @Data public class Student { private int id; private String name; private int tid; } @Data public class Teacher { private int id; private String name; //ä¸€ä¸ªè€å¸ˆæ‹¥æœ‰å¤šä¸ªå­¦ç”Ÿ private List&lt;Student&gt; students; } æŒ‰ç…§ç»“æœåµŒå¥—å¤„ç† &lt;!--æŒ‰ç»“æœåµŒå¥—æŸ¥è¯¢--&gt; &lt;select id=&quot;getTeacher&quot; resultMap=&quot;TeacherStudent&quot;&gt; select s.id sid, s.name sname, t.name tname,t.id tid from student s,teacher t where s.tid = t.id and t.id = #{tid} &lt;/select&gt; &lt;resultMap id=&quot;TeacherStudent&quot; type=&quot;Teacher&quot;&gt; &lt;result property=&quot;id&quot; column=&quot;tid&quot;/&gt; &lt;result property=&quot;name&quot; column=&quot;tname&quot;/&gt; &lt;!--å¤æ‚çš„å±æ€§ï¼Œæˆ‘ä»¬éœ€è¦å•ç‹¬å¤„ç† å¯¹è±¡ï¼š association é›†åˆï¼š collection javaType=&quot;&quot; æŒ‡å®šå±æ€§çš„ç±»å‹ï¼ é›†åˆä¸­çš„æ³›å‹ä¿¡æ¯ï¼Œæˆ‘ä»¬ä½¿ç”¨ofTypeè·å– --&gt; &lt;collection property=&quot;students&quot; ofType=&quot;Student&quot;&gt; &lt;result property=&quot;id&quot; column=&quot;sid&quot;/&gt; &lt;result property=&quot;name&quot; column=&quot;sname&quot;/&gt; &lt;result property=&quot;tid&quot; column=&quot;tid&quot;/&gt; &lt;/collection&gt; &lt;/resultMap&gt; æŒ‰ç…§æŸ¥è¯¢åµŒå¥—å¤„ç† &lt;select id=&quot;getTeacher2&quot; resultMap=&quot;TeacherStudent2&quot;&gt; select * from mybatis.teacher where id = #{tid} &lt;/select&gt; &lt;resultMap id=&quot;TeacherStudent2&quot; type=&quot;Teacher&quot;&gt; &lt;collection property=&quot;students&quot; javaType=&quot;ArrayList&quot; ofType=&quot;Student&quot; select=&quot;getStudentByTeacherId&quot; column=&quot;id&quot;/&gt; &lt;/resultMap&gt; &lt;select id=&quot;getStudentByTeacherId&quot; resultType=&quot;Student&quot;&gt; select * from mybatis.student where tid = #{tid} &lt;/select&gt; å°ç»“ å…³è” - association ã€å¤šå¯¹ä¸€ã€‘ é›†åˆ - collection ã€ä¸€å¯¹å¤šã€‘ javaType &amp; ofType JavaType ç”¨æ¥æŒ‡å®šå®ä½“ç±»ä¸­å±æ€§çš„ç±»å‹ ofType ç”¨æ¥æŒ‡å®šæ˜ å°„åˆ°Listæˆ–è€…é›†åˆä¸­çš„ pojoç±»å‹ï¼Œæ³›å‹ä¸­çš„çº¦æŸç±»å‹ï¼ æ³¨æ„ç‚¹ï¼š ä¿è¯SQLçš„å¯è¯»æ€§ï¼Œå°½é‡ä¿è¯é€šä¿—æ˜“æ‡‚ æ³¨æ„ä¸€å¯¹å¤šå’Œå¤šå¯¹ä¸€ä¸­ï¼Œå±æ€§åå’Œå­—æ®µçš„é—®é¢˜ï¼ å¦‚æœé—®é¢˜ä¸å¥½æ’æŸ¥é”™è¯¯ï¼Œå¯ä»¥ä½¿ç”¨æ—¥å¿— ï¼Œ å»ºè®®ä½¿ç”¨ Log4j æ…¢SQL 1s 1000s é¢è¯•é«˜é¢‘ Mysqlå¼•æ“ InnoDBåº•å±‚åŸç† ç´¢å¼• ç´¢å¼•ä¼˜åŒ–ï¼ 12ã€åŠ¨æ€ SQL ä»€ä¹ˆæ˜¯åŠ¨æ€SQLï¼šåŠ¨æ€SQLå°±æ˜¯æŒ‡æ ¹æ®ä¸åŒçš„æ¡ä»¶ç”Ÿæˆä¸åŒçš„SQLè¯­å¥ åˆ©ç”¨åŠ¨æ€ SQL è¿™ä¸€ç‰¹æ€§å¯ä»¥å½»åº•æ‘†è„±è¿™ç§ç—›è‹¦ã€‚ åŠ¨æ€ SQL å…ƒç´ å’Œ JSTL æˆ–åŸºäºç±»ä¼¼ XML çš„æ–‡æœ¬å¤„ç†å™¨ç›¸ä¼¼ã€‚åœ¨ MyBatis ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œæœ‰å¾ˆå¤šå…ƒç´ éœ€è¦èŠ±æ—¶é—´äº†è§£ã€‚MyBatis 3 å¤§å¤§ç²¾ç®€äº†å…ƒç´ ç§ç±»ï¼Œç°åœ¨åªéœ€å­¦ä¹ åŸæ¥ä¸€åŠçš„å…ƒç´ ä¾¿å¯ã€‚MyBatis é‡‡ç”¨åŠŸèƒ½å¼ºå¤§çš„åŸºäº OGNL çš„è¡¨è¾¾å¼æ¥æ·˜æ±°å…¶å®ƒå¤§éƒ¨åˆ†å…ƒç´ ã€‚ if choose (when, otherwise) trim (where, set) foreach æ­å»ºç¯å¢ƒ CREATE TABLE `blog` ( `id` varchar(50) NOT NULL COMMENT 'åšå®¢id', `title` varchar(100) NOT NULL COMMENT 'åšå®¢æ ‡é¢˜', `author` varchar(30) NOT NULL COMMENT 'åšå®¢ä½œè€…', `create_time` datetime NOT NULL COMMENT 'åˆ›å»ºæ—¶é—´', `views` int(30) NOT NULL COMMENT 'æµè§ˆé‡' ) ENGINE=InnoDB DEFAULT CHARSET=utf8 åˆ›å»ºä¸€ä¸ªåŸºç¡€å·¥ç¨‹ å¯¼åŒ… ç¼–å†™é…ç½®æ–‡ä»¶ ç¼–å†™å®ä½“ç±» @Data public class Blog { private int id; private String title; private String author; private Date createTime; private int views; } ç¼–å†™å®ä½“ç±»å¯¹åº”Mapperæ¥å£ å’Œ Mapper.XMLæ–‡ä»¶ IF &lt;select id=&quot;queryBlogIF&quot; parameterType=&quot;map&quot; resultType=&quot;blog&quot;&gt; select * from mybatis.blog where 1=1 &lt;if test=&quot;title != null&quot;&gt; and title = #{title} &lt;/if&gt; &lt;if test=&quot;author != null&quot;&gt; and author = #{author} &lt;/if&gt; &lt;/select&gt; choose (when, otherwise) &lt;select id=&quot;queryBlogChoose&quot; parameterType=&quot;map&quot; resultType=&quot;blog&quot;&gt; select * from mybatis.blog &lt;where&gt; &lt;choose&gt; &lt;when test=&quot;title != null&quot;&gt; title = #{title} &lt;/when&gt; &lt;when test=&quot;author != null&quot;&gt; and author = #{author} &lt;/when&gt; &lt;otherwise&gt; and views = #{views} &lt;/otherwise&gt; &lt;/choose&gt; &lt;/where&gt; &lt;/select&gt; trim (where,set) select * from mybatis.blog &lt;where&gt; &lt;if test=&quot;title != null&quot;&gt; title = #{title} &lt;/if&gt; &lt;if test=&quot;author != null&quot;&gt; and author = #{author} &lt;/if&gt; &lt;/where&gt; &lt;update id=&quot;updateBlog&quot; parameterType=&quot;map&quot;&gt; update mybatis.blog &lt;set&gt; &lt;if test=&quot;title != null&quot;&gt; title = #{title}, &lt;/if&gt; &lt;if test=&quot;author != null&quot;&gt; author = #{author} &lt;/if&gt; &lt;/set&gt; where id = #{id} &lt;/update&gt; æ‰€è°“çš„åŠ¨æ€SQLï¼Œæœ¬è´¨è¿˜æ˜¯SQLè¯­å¥ ï¼Œ åªæ˜¯æˆ‘ä»¬å¯ä»¥åœ¨SQLå±‚é¢ï¼Œå»æ‰§è¡Œä¸€ä¸ªé€»è¾‘ä»£ç  if where ï¼Œ set ï¼Œ choose ï¼Œwhen SQLç‰‡æ®µ æœ‰çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šå°†ä¸€äº›åŠŸèƒ½çš„éƒ¨åˆ†æŠ½å–å‡ºæ¥ï¼Œæ–¹ä¾¿å¤ç”¨ï¼ ä½¿ç”¨SQLæ ‡ç­¾æŠ½å–å…¬å…±çš„éƒ¨åˆ† &lt;sql id=&quot;if-title-author&quot;&gt; &lt;if test=&quot;title != null&quot;&gt; title = #{title} &lt;/if&gt; &lt;if test=&quot;author != null&quot;&gt; and author = #{author} &lt;/if&gt; &lt;/sql&gt; åœ¨éœ€è¦ä½¿ç”¨çš„åœ°æ–¹ä½¿ç”¨Includeæ ‡ç­¾å¼•ç”¨å³å¯ &lt;select id=&quot;queryBlogIF&quot; parameterType=&quot;map&quot; resultType=&quot;blog&quot;&gt; select * from mybatis.blog &lt;where&gt; &lt;include refid=&quot;if-title-author&quot;&gt;&lt;/include&gt; &lt;/where&gt; &lt;/select&gt; æ³¨æ„äº‹é¡¹ï¼š æœ€å¥½åŸºäºå•è¡¨æ¥å®šä¹‰SQLç‰‡æ®µï¼ ä¸è¦å­˜åœ¨whereæ ‡ç­¾ Foreach select * from user where 1=1 and &lt;foreach item=&quot;id&quot; collection=&quot;ids&quot; open=&quot;(&quot; separator=&quot;or&quot; close=&quot;)&quot;&gt; #{id} &lt;/foreach&gt; (id=1 or id=2 or id=3) &lt;!-- select * from mybatis.blog where 1=1 and (id=1 or id = 2 or id=3) æˆ‘ä»¬ç°åœ¨ä¼ é€’ä¸€ä¸ªä¸‡èƒ½çš„map ï¼Œ è¿™mapä¸­å¯ä»¥å­˜åœ¨ä¸€ä¸ªé›†åˆï¼ --&gt; &lt;select id=&quot;queryBlogForeach&quot; parameterType=&quot;map&quot; resultType=&quot;blog&quot;&gt; select * from mybatis.blog &lt;where&gt; &lt;foreach collection=&quot;ids&quot; item=&quot;id&quot; open=&quot;and (&quot; close=&quot;)&quot; separator=&quot;or&quot;&gt; id = #{id} &lt;/foreach&gt; &lt;/where&gt; &lt;/select&gt; åŠ¨æ€SQLå°±æ˜¯åœ¨æ‹¼æ¥SQLè¯­å¥ï¼Œæˆ‘ä»¬åªè¦ä¿è¯SQLçš„æ­£ç¡®æ€§ï¼ŒæŒ‰ç…§SQLçš„æ ¼å¼ï¼Œå»æ’åˆ—ç»„åˆå°±å¯ä»¥äº† å»ºè®®ï¼š ç°åœ¨Mysqlä¸­å†™å‡ºå®Œæ•´çš„SQL,å†å¯¹åº”çš„å»ä¿®æ”¹æˆä¸ºæˆ‘ä»¬çš„åŠ¨æ€SQLå®ç°é€šç”¨å³å¯ï¼ 13ã€ç¼“å­˜ ï¼ˆäº†è§£ï¼‰ 13.1ã€ç®€ä»‹ æŸ¥è¯¢ ï¼š è¿æ¥æ•°æ®åº“ ï¼Œè€—èµ„æºï¼ ä¸€æ¬¡æŸ¥è¯¢çš„ç»“æœï¼Œç»™ä»–æš‚å­˜åœ¨ä¸€ä¸ªå¯ä»¥ç›´æ¥å–åˆ°çš„åœ°æ–¹ï¼--&gt; å†…å­˜ ï¼š ç¼“å­˜ æˆ‘ä»¬å†æ¬¡æŸ¥è¯¢ç›¸åŒæ•°æ®çš„æ—¶å€™ï¼Œç›´æ¥èµ°ç¼“å­˜ï¼Œå°±ä¸ç”¨èµ°æ•°æ®åº“äº† ä»€ä¹ˆæ˜¯ç¼“å­˜ [ Cache ]ï¼Ÿ å­˜åœ¨å†…å­˜ä¸­çš„ä¸´æ—¶æ•°æ®ã€‚ å°†ç”¨æˆ·ç»å¸¸æŸ¥è¯¢çš„æ•°æ®æ”¾åœ¨ç¼“å­˜ï¼ˆå†…å­˜ï¼‰ä¸­ï¼Œç”¨æˆ·å»æŸ¥è¯¢æ•°æ®å°±ä¸ç”¨ä»ç£ç›˜ä¸Š(å…³ç³»å‹æ•°æ®åº“æ•°æ®æ–‡ä»¶)æŸ¥è¯¢ï¼Œä»ç¼“å­˜ä¸­æŸ¥è¯¢ï¼Œä»è€Œæé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œè§£å†³äº†é«˜å¹¶å‘ç³»ç»Ÿçš„æ€§èƒ½é—®é¢˜ã€‚ ä¸ºä»€ä¹ˆä½¿ç”¨ç¼“å­˜ï¼Ÿ å‡å°‘å’Œæ•°æ®åº“çš„äº¤äº’æ¬¡æ•°ï¼Œå‡å°‘ç³»ç»Ÿå¼€é”€ï¼Œæé«˜ç³»ç»Ÿæ•ˆç‡ã€‚ ä»€ä¹ˆæ ·çš„æ•°æ®èƒ½ä½¿ç”¨ç¼“å­˜ï¼Ÿ ç»å¸¸æŸ¥è¯¢å¹¶ä¸”ä¸ç»å¸¸æ”¹å˜çš„æ•°æ®ã€‚ã€å¯ä»¥ä½¿ç”¨ç¼“å­˜ã€‘ 13.2ã€Mybatisç¼“å­˜ MyBatisåŒ…å«ä¸€ä¸ªéå¸¸å¼ºå¤§çš„æŸ¥è¯¢ç¼“å­˜ç‰¹æ€§ï¼Œå®ƒå¯ä»¥éå¸¸æ–¹ä¾¿åœ°å®šåˆ¶å’Œé…ç½®ç¼“å­˜ã€‚ç¼“å­˜å¯ä»¥æå¤§çš„æå‡æŸ¥è¯¢æ•ˆç‡ã€‚ MyBatisç³»ç»Ÿä¸­é»˜è®¤å®šä¹‰äº†ä¸¤çº§ç¼“å­˜ï¼šä¸€çº§ç¼“å­˜å’ŒäºŒçº§ç¼“å­˜ é»˜è®¤æƒ…å†µä¸‹ï¼Œåªæœ‰ä¸€çº§ç¼“å­˜å¼€å¯ã€‚ï¼ˆSqlSessionçº§åˆ«çš„ç¼“å­˜ï¼Œä¹Ÿç§°ä¸ºæœ¬åœ°ç¼“å­˜ï¼‰ äºŒçº§ç¼“å­˜éœ€è¦æ‰‹åŠ¨å¼€å¯å’Œé…ç½®ï¼Œä»–æ˜¯åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ã€‚ ä¸ºäº†æé«˜æ‰©å±•æ€§ï¼ŒMyBatiså®šä¹‰äº†ç¼“å­˜æ¥å£Cacheã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å®ç°Cacheæ¥å£æ¥è‡ªå®šä¹‰äºŒçº§ç¼“å­˜ 13.3ã€ä¸€çº§ç¼“å­˜ ä¸€çº§ç¼“å­˜ä¹Ÿå«æœ¬åœ°ç¼“å­˜ï¼š SqlSession ä¸æ•°æ®åº“åŒä¸€æ¬¡ä¼šè¯æœŸé—´æŸ¥è¯¢åˆ°çš„æ•°æ®ä¼šæ”¾åœ¨æœ¬åœ°ç¼“å­˜ä¸­ã€‚ ä»¥åå¦‚æœéœ€è¦è·å–ç›¸åŒçš„æ•°æ®ï¼Œç›´æ¥ä»ç¼“å­˜ä¸­æ‹¿ï¼Œæ²¡å¿…é¡»å†å»æŸ¥è¯¢æ•°æ®åº“ï¼› æµ‹è¯•æ­¥éª¤ï¼š å¼€å¯æ—¥å¿—ï¼ æµ‹è¯•åœ¨ä¸€ä¸ªSesionä¸­æŸ¥è¯¢ä¸¤æ¬¡ç›¸åŒè®°å½• æŸ¥çœ‹æ—¥å¿—è¾“å‡º ç¼“å­˜å¤±æ•ˆçš„æƒ…å†µï¼š æŸ¥è¯¢ä¸åŒçš„ä¸œè¥¿ å¢åˆ æ”¹æ“ä½œï¼Œå¯èƒ½ä¼šæ”¹å˜åŸæ¥çš„æ•°æ®ï¼Œæ‰€ä»¥å¿…å®šä¼šåˆ·æ–°ç¼“å­˜ï¼ æŸ¥è¯¢ä¸åŒçš„Mapper.xml æ‰‹åŠ¨æ¸…ç†ç¼“å­˜ï¼ å°ç»“ï¼šä¸€çº§ç¼“å­˜é»˜è®¤æ˜¯å¼€å¯çš„ï¼Œåªåœ¨ä¸€æ¬¡SqlSessionä¸­æœ‰æ•ˆï¼Œä¹Ÿå°±æ˜¯æ‹¿åˆ°è¿æ¥åˆ°å…³é—­è¿æ¥è¿™ä¸ªåŒºé—´æ®µï¼ ä¸€çº§ç¼“å­˜å°±æ˜¯ä¸€ä¸ªMapã€‚ 13.4ã€äºŒçº§ç¼“å­˜ äºŒçº§ç¼“å­˜ä¹Ÿå«å…¨å±€ç¼“å­˜ï¼Œä¸€çº§ç¼“å­˜ä½œç”¨åŸŸå¤ªä½äº†ï¼Œæ‰€ä»¥è¯ç”Ÿäº†äºŒçº§ç¼“å­˜ åŸºäºnamespaceçº§åˆ«çš„ç¼“å­˜ï¼Œä¸€ä¸ªåç§°ç©ºé—´ï¼Œå¯¹åº”ä¸€ä¸ªäºŒçº§ç¼“å­˜ï¼› å·¥ä½œæœºåˆ¶ ä¸€ä¸ªä¼šè¯æŸ¥è¯¢ä¸€æ¡æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®å°±ä¼šè¢«æ”¾åœ¨å½“å‰ä¼šè¯çš„ä¸€çº§ç¼“å­˜ä¸­ï¼› å¦‚æœå½“å‰ä¼šè¯å…³é—­äº†ï¼Œè¿™ä¸ªä¼šè¯å¯¹åº”çš„ä¸€çº§ç¼“å­˜å°±æ²¡äº†ï¼›ä½†æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ˜¯ï¼Œä¼šè¯å…³é—­äº†ï¼Œä¸€çº§ç¼“å­˜ä¸­çš„æ•°æ®è¢«ä¿å­˜åˆ°äºŒçº§ç¼“å­˜ä¸­ï¼› æ–°çš„ä¼šè¯æŸ¥è¯¢ä¿¡æ¯ï¼Œå°±å¯ä»¥ä»äºŒçº§ç¼“å­˜ä¸­è·å–å†…å®¹ï¼› ä¸åŒçš„mapperæŸ¥å‡ºçš„æ•°æ®ä¼šæ”¾åœ¨è‡ªå·±å¯¹åº”çš„ç¼“å­˜ï¼ˆmapï¼‰ä¸­ï¼› æ­¥éª¤ï¼š å¼€å¯å…¨å±€ç¼“å­˜ &lt;!--æ˜¾ç¤ºçš„å¼€å¯å…¨å±€ç¼“å­˜--&gt; &lt;setting name=&quot;cacheEnabled&quot; value=&quot;true&quot;/&gt; åœ¨è¦ä½¿ç”¨äºŒçº§ç¼“å­˜çš„Mapperä¸­å¼€å¯ &lt;!--åœ¨å½“å‰Mapper.xmlä¸­ä½¿ç”¨äºŒçº§ç¼“å­˜--&gt; &lt;cache/&gt; ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å‚æ•° &lt;!--åœ¨å½“å‰Mapper.xmlä¸­ä½¿ç”¨äºŒçº§ç¼“å­˜--&gt; &lt;cache eviction=&quot;FIFO&quot; flushInterval=&quot;60000&quot; size=&quot;512&quot; readOnly=&quot;true&quot;/&gt; æµ‹è¯• é—®é¢˜:æˆ‘ä»¬éœ€è¦å°†å®ä½“ç±»åºåˆ—åŒ–ï¼å¦åˆ™å°±ä¼šæŠ¥é”™ï¼ Caused by: java.io.NotSerializableException: com.kuang.pojo.User å°ç»“ï¼š åªè¦å¼€å¯äº†äºŒçº§ç¼“å­˜ï¼Œåœ¨åŒä¸€ä¸ªMapperä¸‹å°±æœ‰æ•ˆ æ‰€æœ‰çš„æ•°æ®éƒ½ä¼šå…ˆæ”¾åœ¨ä¸€çº§ç¼“å­˜ä¸­ï¼› åªæœ‰å½“ä¼šè¯æäº¤ï¼Œæˆ–è€…å…³é—­çš„æ—¶å€™ï¼Œæ‰ä¼šæäº¤åˆ°äºŒçº§ç¼“å†²ä¸­ï¼ 13.5ã€ç¼“å­˜åŸç† 13.6ã€è‡ªå®šä¹‰ç¼“å­˜-ehcache Ehcacheæ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„å¼€æºJavaåˆ†å¸ƒå¼ç¼“å­˜ã€‚ä¸»è¦é¢å‘é€šç”¨ç¼“å­˜ è¦åœ¨ç¨‹åºä¸­ä½¿ç”¨ehcacheï¼Œå…ˆè¦å¯¼åŒ…ï¼ &lt;!-- https://mvnrepository.com/artifact/org.mybatis.caches/mybatis-ehcache --&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis.caches&lt;/groupId&gt; &lt;artifactId&gt;mybatis-ehcache&lt;/artifactId&gt; &lt;version&gt;1.1.0&lt;/version&gt; &lt;/dependency&gt; åœ¨mapperä¸­æŒ‡å®šä½¿ç”¨æˆ‘ä»¬çš„ehcacheç¼“å­˜å®ç°ï¼ &lt;!--åœ¨å½“å‰Mapper.xmlä¸­ä½¿ç”¨äºŒçº§ç¼“å­˜--&gt; &lt;cache type=&quot;org.mybatis.caches.ehcache.EhcacheCache&quot;/&gt; ehcache.xml &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;ehcache xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:noNamespaceSchemaLocation=&quot;http://ehcache.org/ehcache.xsd&quot; updateCheck=&quot;false&quot;&gt; &lt;!-- diskStoreï¼šä¸ºç¼“å­˜è·¯å¾„ï¼Œehcacheåˆ†ä¸ºå†…å­˜å’Œç£ç›˜ä¸¤çº§ï¼Œæ­¤å±æ€§å®šä¹‰ç£ç›˜çš„ç¼“å­˜ä½ç½®ã€‚å‚æ•°è§£é‡Šå¦‚ä¸‹ï¼š user.home â€“ ç”¨æˆ·ä¸»ç›®å½• user.dir â€“ ç”¨æˆ·å½“å‰å·¥ä½œç›®å½• java.io.tmpdir â€“ é»˜è®¤ä¸´æ—¶æ–‡ä»¶è·¯å¾„ --&gt; &lt;diskStore path=&quot;./tmpdir/Tmp_EhCache&quot;/&gt; &lt;defaultCache eternal=&quot;false&quot; maxElementsInMemory=&quot;10000&quot; overflowToDisk=&quot;false&quot; diskPersistent=&quot;false&quot; timeToIdleSeconds=&quot;1800&quot; timeToLiveSeconds=&quot;259200&quot; memoryStoreEvictionPolicy=&quot;LRU&quot;/&gt; &lt;cache name=&quot;cloud_user&quot; eternal=&quot;false&quot; maxElementsInMemory=&quot;5000&quot; overflowToDisk=&quot;false&quot; diskPersistent=&quot;false&quot; timeToIdleSeconds=&quot;1800&quot; timeToLiveSeconds=&quot;1800&quot; memoryStoreEvictionPolicy=&quot;LRU&quot;/&gt; &lt;!-- defaultCacheï¼šé»˜è®¤ç¼“å­˜ç­–ç•¥ï¼Œå½“ehcacheæ‰¾ä¸åˆ°å®šä¹‰çš„ç¼“å­˜æ—¶ï¼Œåˆ™ä½¿ç”¨è¿™ä¸ªç¼“å­˜ç­–ç•¥ã€‚åªèƒ½å®šä¹‰ä¸€ä¸ªã€‚ --&gt; &lt;!-- name:ç¼“å­˜åç§°ã€‚ maxElementsInMemory:ç¼“å­˜æœ€å¤§æ•°ç›® maxElementsOnDiskï¼šç¡¬ç›˜æœ€å¤§ç¼“å­˜ä¸ªæ•°ã€‚ eternal:å¯¹è±¡æ˜¯å¦æ°¸ä¹…æœ‰æ•ˆï¼Œä¸€ä½†è®¾ç½®äº†ï¼Œtimeoutå°†ä¸èµ·ä½œç”¨ã€‚ overflowToDisk:æ˜¯å¦ä¿å­˜åˆ°ç£ç›˜ï¼Œå½“ç³»ç»Ÿå½“æœºæ—¶ timeToIdleSeconds:è®¾ç½®å¯¹è±¡åœ¨å¤±æ•ˆå‰çš„å…è®¸é—²ç½®æ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰ã€‚ä»…å½“eternal=falseå¯¹è±¡ä¸æ˜¯æ°¸ä¹…æœ‰æ•ˆæ—¶ä½¿ç”¨ï¼Œå¯é€‰å±æ€§ï¼Œé»˜è®¤å€¼æ˜¯0ï¼Œä¹Ÿå°±æ˜¯å¯é—²ç½®æ—¶é—´æ— ç©·å¤§ã€‚ timeToLiveSeconds:è®¾ç½®å¯¹è±¡åœ¨å¤±æ•ˆå‰å…è®¸å­˜æ´»æ—¶é—´ï¼ˆå•ä½ï¼šç§’ï¼‰ã€‚æœ€å¤§æ—¶é—´ä»‹äºåˆ›å»ºæ—¶é—´å’Œå¤±æ•ˆæ—¶é—´ä¹‹é—´ã€‚ä»…å½“eternal=falseå¯¹è±¡ä¸æ˜¯æ°¸ä¹…æœ‰æ•ˆæ—¶ä½¿ç”¨ï¼Œé»˜è®¤æ˜¯0.ï¼Œä¹Ÿå°±æ˜¯å¯¹è±¡å­˜æ´»æ—¶é—´æ— ç©·å¤§ã€‚ diskPersistentï¼šæ˜¯å¦ç¼“å­˜è™šæ‹Ÿæœºé‡å¯æœŸæ•°æ® Whether the disk store persists between restarts of the Virtual Machine. The default value is false. diskSpoolBufferSizeMBï¼šè¿™ä¸ªå‚æ•°è®¾ç½®DiskStoreï¼ˆç£ç›˜ç¼“å­˜ï¼‰çš„ç¼“å­˜åŒºå¤§å°ã€‚é»˜è®¤æ˜¯30MBã€‚æ¯ä¸ªCacheéƒ½åº”è¯¥æœ‰è‡ªå·±çš„ä¸€ä¸ªç¼“å†²åŒºã€‚ diskExpiryThreadIntervalSecondsï¼šç£ç›˜å¤±æ•ˆçº¿ç¨‹è¿è¡Œæ—¶é—´é—´éš”ï¼Œé»˜è®¤æ˜¯120ç§’ã€‚ memoryStoreEvictionPolicyï¼šå½“è¾¾åˆ°maxElementsInMemoryé™åˆ¶æ—¶ï¼ŒEhcacheå°†ä¼šæ ¹æ®æŒ‡å®šçš„ç­–ç•¥å»æ¸…ç†å†…å­˜ã€‚é»˜è®¤ç­–ç•¥æ˜¯LRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼‰ã€‚ä½ å¯ä»¥è®¾ç½®ä¸ºFIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰æˆ–æ˜¯LFUï¼ˆè¾ƒå°‘ä½¿ç”¨ï¼‰ã€‚ clearOnFlushï¼šå†…å­˜æ•°é‡æœ€å¤§æ—¶æ˜¯å¦æ¸…é™¤ã€‚ memoryStoreEvictionPolicy:å¯é€‰ç­–ç•¥æœ‰ï¼šLRUï¼ˆæœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼Œé»˜è®¤ç­–ç•¥ï¼‰ã€FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰ã€LFUï¼ˆæœ€å°‘è®¿é—®æ¬¡æ•°ï¼‰ã€‚ FIFOï¼Œfirst in first outï¼Œè¿™ä¸ªæ˜¯å¤§å®¶æœ€ç†Ÿçš„ï¼Œå…ˆè¿›å…ˆå‡ºã€‚ LFUï¼Œ Less Frequently Usedï¼Œå°±æ˜¯ä¸Šé¢ä¾‹å­ä¸­ä½¿ç”¨çš„ç­–ç•¥ï¼Œç›´ç™½ä¸€ç‚¹å°±æ˜¯è®²ä¸€ç›´ä»¥æ¥æœ€å°‘è¢«ä½¿ç”¨çš„ã€‚å¦‚ä¸Šé¢æ‰€è®²ï¼Œç¼“å­˜çš„å…ƒç´ æœ‰ä¸€ä¸ªhitå±æ€§ï¼Œhitå€¼æœ€å°çš„å°†ä¼šè¢«æ¸…å‡ºç¼“å­˜ã€‚ LRUï¼ŒLeast Recently Usedï¼Œæœ€è¿‘æœ€å°‘ä½¿ç”¨çš„ï¼Œç¼“å­˜çš„å…ƒç´ æœ‰ä¸€ä¸ªæ—¶é—´æˆ³ï¼Œå½“ç¼“å­˜å®¹é‡æ»¡äº†ï¼Œè€Œåˆéœ€è¦è…¾å‡ºåœ°æ–¹æ¥ç¼“å­˜æ–°çš„å…ƒç´ çš„æ—¶å€™ï¼Œé‚£ä¹ˆç°æœ‰ç¼“å­˜å…ƒç´ ä¸­æ—¶é—´æˆ³ç¦»å½“å‰æ—¶é—´æœ€è¿œçš„å…ƒç´ å°†è¢«æ¸…å‡ºç¼“å­˜ã€‚ --&gt; &lt;/ehcache&gt; Redisæ•°æ®åº“æ¥åšç¼“å­˜ï¼ K-V ç»ƒä¹ ï¼š29é“ç»ƒä¹ é¢˜å®æˆ˜ï¼ ","link":"https://yingjun123456789.github.io/post/mybatis/"},{"title":"Hello Gridea","content":"ğŸ‘ æ¬¢è¿ä½¿ç”¨ Gridea ï¼ âœï¸ Gridea ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ... Github Gridea ä¸»é¡µ ç¤ºä¾‹ç½‘ç«™ ç‰¹æ€§ğŸ‘‡ ğŸ“ ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ Markdown è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ ğŸŒ‰ ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡ ğŸ·ï¸ ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„ ğŸ“‹ ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå• ğŸ’» ä½ å¯ä»¥åœ¨ Windowsï¼ŒMacOS æˆ– Linux è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯ ğŸŒ ä½ å¯ä»¥ä½¿ç”¨ ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ æˆ– Coding Pages å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å° ğŸ’¬ ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ Gitalk æˆ– DisqusJS è¯„è®ºç³»ç»Ÿ ğŸ‡¬ğŸ‡§ ä½ å¯ä»¥ä½¿ç”¨ä¸­æ–‡ç®€ä½“æˆ–è‹±è¯­ ğŸŒ ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ› ğŸ–¥ ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥ ğŸŒ± å½“ç„¶ Gridea è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´ å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼ ğŸ˜˜ Enjoy~ ","link":"https://yingjun123456789.github.io/post/hello-gridea/"}]}